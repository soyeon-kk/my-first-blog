{% extends 'blog/base.html' %}
{% block content %}
  <div class="form-container">
    <h2>ìƒˆ ê¸€ ì‘ì„± / ìˆ˜ì •</h2>
    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- âœ… ì‘ì„±ì ì…ë ¥ í•„ë“œ ì¶”ê°€ -->
      <p>
        {{ form.author.label_tag }}
        {{ form.author }}
      </p>

      <p>
        {{ form.title.label_tag }}
        {{ form.title }}
      </p>

      <p>
        {{ form.text.label_tag }}
        {{ form.text }}
      </p>

      <!-- ğŸ”¹ ì´ë¯¸ì§€ í•„ë“œ ì§ì ‘ ì»¤ìŠ¤í…€ -->
      <div class="file-field">
        <label class="file-upload-label" for="id_image">ì´ë¯¸ì§€ ì„ íƒ</label>
        <span id="file-chosen">ì„ íƒëœ íŒŒì¼ ì—†ìŒ</span>
        {{ form.image }}
      </div>

      <button type="submit" class="btn">ì €ì¥</button>
    </form>
  </div>

  <script>
    const fileInput = document.getElementById("id_image");
    const fileChosen = document.getElementById("file-chosen");
    const label = document.querySelector(".file-upload-label");

    // ë¼ë²¨ í´ë¦­ ì‹œ íŒŒì¼ ì„ íƒì°½ ì—´ê¸°
    label.addEventListener("click", () => fileInput.click());

    // íŒŒì¼ ì„ íƒ ì‹œ ì´ë¦„ í‘œì‹œ
    fileInput.addEventListener("change", () => {
      if (fileInput.files.length > 0) {
        fileChosen.textContent = fileInput.files[0].name;
      } else {
        fileChosen.textContent = "ì„ íƒëœ íŒŒì¼ ì—†ìŒ";
      }
    });
  </script>
{% endblock %}
